
function scrollsY(box){
	$(".scroll_box").remove()
	var pointY=0,top=0;
	var indexObj;
	$(box).each(function(){
		var box=$(this);
		var H=box.height();
		var cententH=box.children().height();
		var btnH=H/cententH*H;
		var scrollY='<div class="scroll_box" boxH="'+H+'" cententH="'+cententH+'" move="false">';
			scrollY+='<div class="scrollY_btn" tops="0">';
			scrollY+='<div style="background-color:#696979;position:absolute;width:6px;left:0px;height:100%;border-radius:4px"></div>';
			scrollY+='</div></div>';
		box.parent().css({"position":"relative"});
		if(H/cententH<1){
			box.children(".scroll_box").remove();
			box.before(scrollY);
		}else{
			box.children(".scroll_box").remove();
		}
		box.siblings(".scroll_box").css({
			"width":"6px",
			"position":"absolute",
			"top":0,
			"right":0,
			"z-index":0,
			"background-color":"#444448",
			"height":H
		});
		box.siblings(".scroll_box").children(".scrollY_btn").css({
			"width":"100%",
			"position":"relative",
			"cursor":"pointer",
			"height":btnH
		});
		$(".scrollY_btn").hover(function(){
			$(this).children().css({
				"background-color":"#9797ac",
			});
		},function(){
			$(this).children().css({
				"background-color":"#696979",
			});
		});
		addscroll(box);
		$(".scrollY_btn").mousedown(function(e){
			indexObj=$(this);
			pointY = e.pageY;	//这里可以得到鼠标Y坐标
			top=$(this).attr("tops")*1;
			$(this).parent().attr("move","true");
			$(this).focus();
		});
		$(document).mousemove(function(e){
			e.stopPropagation();
			if(indexObj!=undefined){
				if(indexObj.parent().attr("move")=="true"){
					var moveY =e.pageY-pointY;
					var boxH=indexObj.parent().attr("boxH")
					var cententH=indexObj.parent().attr("cententH");
					var btnH=boxH/cententH*boxH;
					indexObj.siblings().unbind();
					indexObj.css({
						"margin-top":top+moveY
					});
					indexObj.attr("tops",top+moveY);
					indexObj.parent().siblings().scrollTop((top+moveY)/boxH*cententH);
					if(top+moveY>boxH-btnH){
						indexObj.css({
							"margin-top":boxH-btnH
						});
						indexObj.attr("tops",boxH-btnH);
					}else if(top+moveY<0){
						indexObj.css({
							"margin-top":0
						});
						indexObj.attr("tops",0);
					}
				}
			}
		});
		$(document).mouseup(function(e){
			if(indexObj!=undefined){
				indexObj.parent().attr("move","false")
				addscroll(box);
			}
		});
	});
	
	function addscroll(box){
		box.scroll(function(){
			var Y=$(this).scrollTop();
			var boxH=$(this).siblings(".scroll_box").attr("boxH")
			var cententH=$(this).siblings(".scroll_box").attr("cententH");
			$(this).siblings(".scroll_box").children(".scrollY_btn").css({
				"margin-top":Y/cententH*boxH
			});
			$(this).siblings(".scroll_box").children(".scrollY_btn").attr("tops",Y/cententH*boxH);
		});
	}
}


